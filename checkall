#!/bin/bash

timeout=35

check() {
  echo checking $1;
  if easycrypt -I .  -I ./rewinding  -I ./aux -I ./program_logic -I ./memory_props -timeout $timeout $1;
  then echo passed: $1;
       echo "";
  else echo failed: $1;
       echo "";
       echo "skipping remaining scripts";
  exit 1;
  fi;
}

# list of files to check

## Generic prog. results
check program_logic/OneToManyZK.ec
check program_logic/GenericKE.ec
check program_logic/WhileNoSuccess.ec
check program_logic/WhileNotB.ec
check program_logic/WhileCycle.ec


## Generic ZK results
check GenericZK.ec

# ## Hamilton-Blum protocol
# check HC/Basics.ec
# check HC/Completeness.ec
# check HC/SpecialSoundness.ec
# check HC/PoK_Soundness.ec
# check HC/ZK.ec 

## Quadratic residue protocol
check QR/Basics.ec
check QR/Completeness.ec
check QR/SpecialSoundness.ec
check QR/PoK.ec
check QR/Soundness.ec
check QR/Sim1Property.ec
check QR/ZK.ec


# ## Quadratic residue protocol
# check DL/Basics.ec
# check DL/Completeness.ec
# check DL/SpecialSoundness.ec
# check DL/PoK.ec



echo "DONE";
